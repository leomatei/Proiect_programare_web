<!DOCTYPE html>
<html lang="ro">
    <head>
        <script src="https://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script>
        <link rel="stylesheet" href="./styles/style.css">
        <title>Pesniue-Camere</title>
        <meta charset="UTF-8"/>
    </head>
    <header class="header">
        <a class="logo" href="./index.html">
            <img height="60" src="../images/logo.png" alt="logo">
        </a>
        <!-- <h1 class="title">Pensiune</h1> -->
        <nav class="menu">
            <div class="menu-item rooms-button">
                <span class='menu-item-title'>Camere</span>
                <ul class="list-of-rooms">
                    <li class="room"><a href="./rooms.html">toate camerele</a></li>
                    <li class="room">camera 1</li>
                    <li class="room">camera 2</li>
                    <li class="room">camera 3</li>
                    <li class="room">camera 4</li>
                    <li class="room">camera 5</li>
                    <li class="room">camera 6</li>
                </ul>
            </div>
            <div class="menu-item">
                <a href="./booking.html">rezerva o camera</a> 
            </div>
            <div class="menu-item">
                <a href="login.html">intra in cont</a>
            </div>
            <div class="menu-item">
                <a href="signup.html">creeaza un cont</a>
            </div>
            <div class="menu-button">
                <svg alt="buton meniu"xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 6h-24v-4h24v4zm0 4h-24v4h24v-4zm0 8h-24v4h24v-4z"/></svg>
            </div>
        </nav>
    </header>
    <div class="pop-up hidden">
        <span onclick=ClosePopUp(this)>X</span>
        <img class="room1" src="../images/room1-1.jpg" alt="poza camera" width="250" height="250">
    </div>
    <div class="pop-up hidden">
        <span onclick=ClosePopUp(this)>X</span>
        <img class="room2" src="../images/room1-1.jpg" alt="poza camera" width="250" height="250">
    </div>
    <div class="pop-up hidden">
        <span onclick=ClosePopUp(this)>X</span>
        <img class="room3" src="../images/room1-1.jpg" alt="poza camera" width="250" height="250">
    </div>
    <div class="pop-up hidden">
        <span onclick=ClosePopUp(this)>X</span>
        <img class="room4" src="../images/room1-1.jpg" alt="poza camera" width="250" height="250">
    </div>
    <div class="pop-up hidden">
        <span onclick=ClosePopUp(this)>X</span>
        <img class="room5" src="../images/room1-1.jpg" alt="poza camera" width="250" height="250">
    </div>
    <div class="pop-up hidden">
        <span onclick=ClosePopUp(this)>X</span>
        <video class="room6" width="500" height="300" controls>
            <source  src="../images/room1-1_LLlzMrS2.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
    </div>
    <main class="main-content">
        <script>
            function PopUpImage(element){
                $('.'+element.classList[0])[0].parentNode.classList.remove('hidden')
            }
            function ClosePopUp(element){
                element.parentNode.classList.add('hidden')
            }
        </script>
        <table class="table-rooms">
            <tr>
              <th>Camera</th>
              <th>Etaj</th>
              <th>Numar paturi</th>
              <th>Baie</th>
              <th>Balcon</th>
              <th>Pret lei/noapte 
                <button onclick="SortTableBy(ComparePrice,this)">
                    <svg width="10" height="10" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 330 330" style="enable-background:new 0 0 330 330;" xml:space="preserve">
                        <path id="XMLID_225_" d="M325.607,79.393c-5.857-5.857-15.355-5.858-21.213,0.001l-139.39,139.393L25.607,79.393  c-5.857-5.857-15.355-5.858-21.213,0.001c-5.858,5.858-5.858,15.355,0,21.213l150.004,150c2.813,2.813,6.628,4.393,10.606,4.393  s7.794-1.581,10.606-4.394l149.996-150C331.465,94.749,331.465,85.251,325.607,79.393z"/>
                    </svg>
                </button>
              </th>
              <th>Poza prezentare</th>
              <th>Mai multe...</th>
            </tr>
            <tr>
              <td>1</td>
              <td>1</td>
              <td>2</td>
              <td>Da</td>
              <td>Da</td>
              <td>4</td>
              <td><img onclick=PopUpImage(this) class="room1" src="../images/room1-1.jpg" alt="poza camera" width="25" height="25">
                <span class="hidden-span-1">
                    poza cu camera 1
                </span></td>
              <td><a href="./rooms/room1.html">vezi poze</a></td>
            </tr>
            <tr>
                <td>2</td>
                <td>1</td>
                <td>1</td>
                <td>da</td>
                <td>da</td>
                <td>90</td>
                <td>
                    <img onclick=PopUpImage(this) class="room2" src="../images/room1-1.jpg" alt="poza camera" width="25" height="25">
                    <span class="hidden-span-2">
                        poza cu camera 2
                    </span></td>
                <td><a href="./rooms/room2.html">vezi poze</a></td>
            </tr>
            <tr>
                <td>3</td>
                <td>1</td>
                <td>1</td>
                <td>nu</td>
                <td>nu</td>
                <td>80</td>
                <td><img onclick=PopUpImage(this) class="room3" src="../images/room1-1.jpg" alt="poza camera" width="25" height="25">
                    <span class="hidden-span-3">
                        poza cu camera 3
                    </span></td>
                <td><a href="./rooms/room3.html">vezi poze</a></td>
            </tr>
            <tr>
                <td>4</td>
                <td>2</td>
                <td>3</td>
                <td>da</td>
                <td>da</td>
                <td>150</td>
                <td><img onclick=PopUpImage(this) class="room4" src="../images/room1-1.jpg" alt="poza camera" width="25" height="25">
                    <span class="hidden-span-4">
                        poza cu camera 4
                    </span></td>
                <td><a href="./rooms/room4.html">vezi poze</a></td>
            </tr>
            <tr>
                <td>5</td>
                <td>2</td>
                <td>2</td>
                <td>da</td>
                <td>nu</td>
                <td>120</td>
                <td><img onclick=PopUpImage(this) class="room5" src="../images/room1-1.jpg" alt="poza camera" width="25" height="25">
                    <span class="hidden-span-5">
                        poza cu camera 5
                    </span></td>
                <td><a href="./rooms/room5.html">vezi poze</a></td>
            </tr>
            <tr>
                <td>6</td>
                <td>2</td>
                <td>2</td>
                <td>nu</td>
                <td>nu</td>
                <td>100</td>
                <td><img onclick=PopUpImage(this) class="room6" src="../images/room1-1.jpg" alt="poza camera" width="25" height="25">
                    <span class="hidden-span-6">
                        poza cu camera 6
                    </span></td>
                <td><a href="./rooms/room6.html">vezi poze</a></td>
            </tr>
          </table>
            <span class="hidden-span-2">
                poza cu camera 2
            </span>
            <span class="hidden-span-3">
                poza cu camera 3
            </span>
            <span class="hidden-span-4">
                poza cu camera 4
            </span>
            <span class="hidden-span-5">
                poza cu camera 5
            </span>
            <span class="hidden-span-6">
                poza cu camera 6
            </span>
          <script>
                var table_state='none'
                function ComparePrice(list){
                    return list.sort((element, nextElement)=>{
                        return parseFloat(element.childNodes[11].textContent)-parseFloat(nextElement.childNodes[11].textContent)
                    })
                }

                function SortTableBy(comparation,element){

                    var elements = [].slice.call(document.querySelector('.table-rooms').rows);
                    elements.shift()
                    var new_list = comparation(elements)
                    elements.forEach(element=>element.remove())
                    if(table_state==='sorted_asc'){
                        table_state='sorted_desc'
                        new_list.reverse().forEach(element=>document.querySelector('.table-rooms').firstElementChild.appendChild(element))
                        element.classList.remove('upsidedown')
                    } else {
                        table_state='sorted_asc'
                        new_list.forEach(element=>document.querySelector('.table-rooms').firstElementChild.appendChild(element))
                        element.classList.add('upsidedown')
                    }
                }
          </script>
          <div class="search-container">
              <label class="search label" >cautare detaliata</label>
              <div class="search input">
                    <span>filtre:</span>
                    <div>
                        <span>etaj</span>
                        <input type="number" name="floor">
                    </div>
                    <div>
                        <span>numar paturi</span>
                        <input type="number" name="beds">
                    </div>
                    <div>
                        <span>baie in camera</span>
                        <input type="checkbox" value="da" name="bath">
                    </div>
              </div>
              <button class="search button" onclick="search()">cauta</button>
              <div class="search-result hidden">
                <table class="table-rooms">
                    <tr class="table-header">
                      <th>Camera</th>
                      <th>Etaj</th>
                      <th>Numar paturi</th>
                      <th>Baie</th>
                      <th>Balcon</th>
                      <th>Pret lei/noapte</th>
                      <th>Poza prezentare</th>
                      <th>Mai multe...</th>
                    </tr>
                    <tr class="table-row">
                      <td>1</td>
                      <td>1</td>
                      <td>2</td>
                      <td>Da</td>
                      <td>Da</td>
                      <td>4</td>
                      <td><img class="room1" src="../images/room1-1.jpg" alt="poza camera" width="25" height="25">
                        <span class="hidden-span-1">
                            poza cu camera 1
                        </span></td>
                      <td><a href="./rooms/room1.html">vezi poze</a></td>
                    </tr>
                    <tr class="table-row">
                        <td>2</td>
                        <td>1</td>
                        <td>1</td>
                        <td>da</td>
                        <td>da</td>
                        <td>90</td>
                        <td>
                            <img class="room2" src="../images/room1-1.jpg" alt="poza camera" width="25" height="25">
                            <span class="hidden-span-2">
                                poza cu camera 2
                            </span></td>
                        <td><a href="./rooms/room2.html">vezi poze</a></td>
                    </tr>
                    <tr class="table-row">
                        <td>3</td>
                        <td>1</td>
                        <td>1</td>
                        <td>nu</td>
                        <td>nu</td>
                        <td>80</td>
                        <td><img class="room3" src="../images/room1-1.jpg" alt="poza camera" width="25" height="25">
                            <span class="hidden-span-3">
                                poza cu camera 3
                            </span></td>
                        <td><a href="./rooms/room3.html">vezi poze</a></td>
                    </tr>
                    <tr class="table-row">
                        <td>4</td>
                        <td>2</td>
                        <td>3</td>
                        <td>da</td>
                        <td>da</td>
                        <td>150</td>
                        <td><img class="room4" src="../images/room1-1.jpg" alt="poza camera" width="25" height="25">
                            <span class="hidden-span-4">
                                poza cu camera 4
                            </span></td>
                        <td><a href="./rooms/room4.html">vezi poze</a></td>
                    </tr>
                    <tr class="table-row">
                        <td>5</td>
                        <td>2</td>
                        <td>2</td>
                        <td>da</td>
                        <td>nu</td>
                        <td>120</td>
                        <td><img class="room5" src="../images/room1-1.jpg" alt="poza camera" width="25" height="25">
                            <span class="hidden-span-5">
                                poza cu camera 5
                            </span></td>
                        <td><a href="./rooms/room5.html">vezi poze</a></td>
                    </tr>
                    <tr class="table-row">
                        <td>6</td>
                        <td>2</td>
                        <td>2</td>
                        <td>nu</td>
                        <td>nu</td>
                        <td>100</td>
                        <td><img class="room6" src="../images/room1-1.jpg" alt="poza camera" width="25" height="25">
                            <span class="hidden-span-6">
                                poza cu camera 6
                            </span></td>
                        <td><a href="./rooms/room6.html">vezi poze</a></td>
                    </tr>
                  </table>
              </div>
          </div>
          <script>
              function search(){
                  const floor = $('input[name="floor"]').val()
                  const beds = $('input[name="beds"]').val()
                  const bath = $('input[name="bath"]:checked').length===0 ? 'nu' : 'da'
                  const tableHeader = $('.table-header')
                  const resultTable = $('.search-result')
                  const rows = $('.table-row')
                  const checkFloor = (element) => {
                      if(floor.toString()===''||floor.toString()==='0'){
                          return true
                      } else {
                          return element.querySelectorAll('td')[1].textContent.toString()===floor.toString()
                            
                      }
                  }
                  const checkBeds = (element) => {
                      if(beds.toString()===''||beds.toString()==='0'){
                          return true
                      } else {
                         return element.querySelectorAll('td')[2].textContent.toString()===beds.toString()
                           
                      }
                      return false
                  }
                  const checkBath = (element) => {
                      if(bath==='nu'){
                          return true
                      }else{
                      
                        return element.querySelectorAll('td')[3].textContent.toString().toLowerCase()===bath
                          
                        }
                  }
                  for(i=0;i<rows.length;i++){
                      if(checkFloor(rows[i])&&checkBeds(rows[i])&&checkBath(rows[i])){
                          if(rows[i].classList.contains('hidden')){
                            rows[i].classList.remove('hidden')
                          }
                      } else {
                        if(!rows[i].classList.contains('hidden')){
                            rows[i].classList.add('hidden')
                          }
                      }
                  }
                  resultTable.removeClass('hidden')
              }
          </script>
        </main>
        <footer class="footer">
            <p class="text">(c) Matei Leonard</p>
            <div class="footer-element">
                <form class="footer-form">
                    <p class="footer-form label">
                        Aboneaza-te la newsletter-ul nostru
                    </p>
                    <input 
                        class="footer-form input" 
                        type="email"   
                        placeholder="Introdu adresa ta de email"
                    />
                    <button class="footer-form button">confirma abonarea</button>
                </form>
            </div>
        </footer>
</html>